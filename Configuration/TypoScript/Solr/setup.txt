plugin.tx_solr.index.queue {
    products = 1
    products {
        table = tx_pxaproductmanager_domain_model_product

        fields {
            title = name
            subTitle = sku

            content = SOLR_CONTENT
            content {
                field = description
            }

            description < .content

            abstract = teaser

            url = USER
            url {
                userFunc = Pixelant\PxaProductManager\UserFunction\Solr\Url->generate
                singleViewPid = {$plugin.tx_pxaproductmanager.settings.pids.singleViewPid}
            }

            product_name_textS = TEXT
            product_name_textS.field = name

            product_sku_textS < .product_name_textS
            product_sku_textS.field = sku

            main_image_stringS = USER
            main_image_stringS {
                userFunc = Pixelant\PxaProductManager\UserFunction\Solr\MainImage->getUrl
            }

            thumbnail_image_stringS = USER
            thumbnail_image_stringS {
                userFunc = Pixelant\PxaProductManager\UserFunction\Solr\ThumbnailImage->getUrl
            }

            attribute_values_stringM = SOLR_RELATION
            attribute_values_stringM {
                localField = attribute_values
                multiValue = 1
            }

            # Index attribute value example
            #attribute_rsk_stringS = USER
            #attribute_rsk_stringS {
            #    userFunc = Pixelant\PxaProductManager\UserFunction\Solr\AttributeValue->value
            #    identifier = rsk
            #}

            category_stringM = SOLR_RELATION
            category_stringM {
                localField = categories
                multiValue = 1
            }

            attachments = 1
            attachments {
                fields = fal_links
                fileExtensions = *
            }
        }
    }
}

plugin.tx_solr.search.faceting.facets.type {
    renderingInstruction {
        # Products
        products = TEXT
        products {
            value = {LLL:EXT:pxa_product_manager/Resources/Private/Language/locallang.xlf:fe.solr.type_facet_name}
            insertData = 1
        }
    }
}

plugin.tx_solr {
    search {
        query {
            queryFields := addToList(product_name_textS^60.0, product_sku_textS^60.0)
        }
    }
}